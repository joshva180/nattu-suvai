<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Task Power ‚Äì Offline Daily Planner</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root{
      --high:#ef4444;--medium:#f59e0b;--low:#22c55e;--bg:#f8fafc;--card:#ffffff;--text:#0f172a;--muted:#64748b;--primary:#2563eb;
    }
    body.dark{--bg:#020617;--card:#020617;--text:#e5e7eb;--muted:#94a3b8}
    *{box-sizing:border-box;font-family:Inter,system-ui,Arial,sans-serif}
    body{margin:0;background:var(--bg);color:var(--text)}
    header{background:var(--card);padding:16px 20px;box-shadow:0 1px 4px rgba(0,0,0,.05);display:flex;justify-content:space-between;align-items:center}
    h1{font-size:20px;margin:0}
    .container{max-width:1200px;margin:auto;padding:20px}
    .grid{display:grid;grid-template-columns:320px 1fr;gap:20px}
    .card{background:var(--card);border-radius:12px;padding:16px;box-shadow:0 1px 6px rgba(0,0,0,.05)}
    label{font-size:12px;color:var(--muted)}
    input,select,textarea{width:100%;padding:8px;margin-top:4px;margin-bottom:12px;border:1px solid #e5e7eb;border-radius:8px}
    button{background:var(--primary);color:#fff;border:none;padding:10px 14px;border-radius:10px;cursor:pointer}
    button.secondary{background:#e5e7eb;color:#000}
    table{width:100%;border-collapse:collapse}
    th,td{padding:10px;border-bottom:1px solid #e5e7eb;font-size:14px;text-align:left}
    th{color:var(--muted)}
    .badge{padding:4px 8px;border-radius:999px;font-size:12px;color:#fff}
    .high{background:var(--high)}.medium{background:var(--medium)}.low{background:var(--low)}
    .stats{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-bottom:20px}
    .stat{background:var(--card);padding:14px;border-radius:12px;text-align:center}
    .stat h2{margin:0;font-size:26px}
    .muted{color:var(--muted)}
    @media(max-width:900px){.grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
<header>
  <h1>‚úÖ Task Power ‚Äì Offline Daily Planner</h1>
  <div style="display:flex;gap:12px;align-items:center">
    <div id="today"></div>
    <button class="secondary" onclick="toggleTheme()">üåì</button>
  </div>
</header>

<div class="container">
  <div class="stats">
    <div class="stat"><h2 id="doneCount">0</h2><div class="muted">Completed</div></div>
    <div class="stat"><h2 id="pendingCount">0</h2><div class="muted">Pending</div></div>
    <div class="stat"><h2 id="productivity">0%</h2><div class="muted">Productivity</div></div>
  </div>

  <div class="grid">
    <!-- ADD TASK -->
    <div class="card">
      <h3>Add Task</h3>
      <label><input type="checkbox" id="important" /> Mark as Important ‚≠ê</label>
      <label>Title</label>
      <input id="title" placeholder="Task name" />

      <label>Priority</label>
      <select id="priority">
        <option value="high">High</option>
        <option value="medium">Medium</option>
        <option value="low">Low</option>
      </select>

      <label>Category</label>
      <select id="category">
        <option>Work</option>
        <option>Health</option>
        <option>Business</option>
      </select>

      <label>Time</label>
      <input type="time" id="time" />

      <label>Repeat</label>
      <select id="repeat">
        <option value="none">None</option>
        <option value="daily">Daily</option>
        <option value="weekly">Weekly</option>
      </select>

      <label>Notes</label>
      <textarea id="notes" placeholder="Optional notes"></textarea>

      <button onclick="addTask()">Add Task</button>
    </div>

    <!-- TASK LIST -->
    <div class="card">
      <h3>Today's Tasks</h3>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-bottom:6px">
        <button class="secondary" onclick="clearCompleted()">üßπ Clear Completed</button>
      </div>
      <div style="display:flex;gap:8px;margin-bottom:10px">
        <input id="search" placeholder="Search task..." onkeyup="render()" />
        <select id="filterPriority" onchange="render()">
          <option value="">All Priority</option>
          <option value="high">High</option>
          <option value="medium">Medium</option>
          <option value="low">Low</option>
        </select>
        <select id="filterCategory" onchange="render()">
          <option value="">All Category</option>
          <option>Work</option>
          <option>Health</option>
          <option>Business</option>
        </select>
      </div>
      <table>
        <thead>
          <tr>
            <th>Done</th>
            <th>Task</th>
            <th>Priority</th>
            <th>Category</th>
            <th>Time</th><th>Delete</th>
          </tr>
        </thead>
        <tbody id="taskTable"></tbody>
      </table>
    </div>
  </div>
</div>

<script>
const today = new Date().toISOString().split('T')[0];
document.getElementById('today').innerText = today;

function getTasks(){
  return JSON.parse(localStorage.getItem('tasks') || '[]');
}
function saveTasks(t){localStorage.setItem('tasks',JSON.stringify(t));}

function addTask(){
  if(!title.value.trim()) return alert('Task title required');
    const task={
    important:important.checked,
    id:Date.now(),
    date:today,
    title:title.value,
    priority:priority.value,
    category:category.value,
    time:time.value,
    repeat:repeat.value,
    notes:notes.value,
    done:false
  };
  const tasks=getTasks();
  tasks.push(task); saveTasks(tasks);
  title.value=notes.value='';
  render();
}

function toggle(id){
  const tasks=getTasks();
  const t=tasks.find(x=>x.id===id);t.done=!t.done;
  saveTasks(tasks);render();
}
function removeTask(id){
  if(!confirm('Delete task?')) return;
  const tasks = getTasks().filter(t => t.id !== id);
  saveTasks(tasks);
  render();
}
function clearCompleted(){
  if(!confirm('Clear all completed tasks?')) return;
  const tasks = getTasks().filter(t => !t.done || t.date !== today);
  saveTasks(tasks);
  render();
}
function toggleTheme(){
  document.body.classList.toggle('dark');
  localStorage.setItem('theme',document.body.classList.contains('dark')?'dark':'light');
}

function render(){
  const pFilter = document.getElementById('filterPriority')?.value || '';
  const cFilter = document.getElementById('filterCategory')?.value || '';
    let tasks=getTasks().filter(t=>t.date===today);
  const q = document.getElementById('search')?.value?.toLowerCase() || '';
  if(q) tasks = tasks.filter(t=>t.title.toLowerCase().includes(q));
  if(pFilter) tasks = tasks.filter(t=>t.priority===pFilter);
  if(cFilter) tasks = tasks.filter(t=>t.category===cFilter);
  taskTable.innerHTML='';
  let done=0;
  tasks.forEach(t=>{
    if(t.done) done++;
    taskTable.innerHTML+=`
      <tr title="${t.notes}">
        <td><input type="checkbox" ${t.done?'checked':''} onchange="toggle(${t.id})"></td>
        <td>${t.important?'‚≠ê ':''}${t.title}</td>
        <td><span class="badge ${t.priority}">${t.priority}</span></td>
        <td>${t.category}</td>
        <td>${t.time||'-'}</td>
        <td><button type="button" class="secondary" onclick="removeTask(${t.id})">üóëÔ∏è</button></td>
      </tr>`;
  });
  doneCount.innerText=done;
  pendingCount.innerText=tasks.length-done;
  productivity.innerText=tasks.length?Math.round(done/tasks.length*100)+'%':'0%';
}
render();
</script>
</body>
</html>
